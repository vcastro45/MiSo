<template>
  <div class="eye" ref="eye">
    <svg version="1.1" class="eye-1" v-show="eyeStep === 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
		 viewBox="0 0 270 300" style="enable-background:new 0 0 270 300;" xml:space="preserve">
		<g>
			<path d="M135.6,233.5c-39.2,0-77.8-27.7-89.8-64.4c-0.6-1.9-2.9-4-5-6c-3.6-3.3-7.7-7.1-7.7-12.8c0-5.2,4.1-10,8-14.7
				c2.2-2.6,4.5-5.3,5.2-7.2C60,89.2,93.4,65.8,135.6,65.8c40.4,0,78.6,26.5,90.7,63.1c0.7,2,2.5,4.5,4.2,6.8c3,4.1,6.4,8.7,6.4,14
				c0,4.3-2.8,8-5.2,11.3c-1.4,1.9-2.9,4-3.3,5.4C218.5,204.6,178.6,233.5,135.6,233.5z"/>
			<path class="st0" d="M135.6,73.8c-38.6,0-69.1,21.4-81.7,57.3c-1.1,3.3-3.8,6.4-6.6,9.7c-2.6,3-6.1,7.2-6.1,9.5
				c0,2.2,2.5,4.5,5.1,6.9c2.8,2.6,5.9,5.5,7.2,9.4c10.9,33.5,46.2,58.8,82.1,58.8c39.5,0,76-26.3,85-61.2c0.8-3,2.7-5.6,4.7-8.2
				c1.6-2.2,3.6-4.9,3.6-6.5c0-2.6-2.5-5.9-4.8-9.2c-2.1-2.9-4.3-5.9-5.4-9.1C207.6,98.1,172.6,73.8,135.6,73.8z"/>
			<g class="st1">
				<path d="M135.6,69.8c39,0,75.4,25.7,86.9,60.3c2.1,6.2,10.4,12.8,10.4,19.5c0,5.2-7.1,10.7-8.4,15.6
					c-9.5,36.8-48.3,64.2-88.9,64.2c-38.6,0-74.8-27.5-85.9-61.6c-2.1-6.5-12.5-10.5-12.5-17.6c0-6.5,10.8-14.5,12.9-20.6
					C63.7,90.8,96.3,69.8,135.6,69.8 M135.6,57.7c-45.7,0-81.9,25.4-96.9,67.9c-0.5,1-2.5,3.3-3.8,4.8c-4.4,5.2-9.9,11.7-9.9,19.9
					c0,9.2,6.2,14.9,10.3,18.7c1,0.9,2.4,2.3,3,3c6.3,19,19.4,36.5,36.9,49.3c18,13.1,39.4,20.3,60.4,20.3
					c46.4,0,89.6-31.3,100.5-72.9c0.4-0.7,1.4-2,2.1-2.9c2.9-3.9,6.8-9.2,6.8-16.1c0-7.9-4.4-13.9-8-18.7c-1.1-1.5-2.7-3.7-3.1-4.6
					C220.8,86.6,179.4,57.7,135.6,57.7L135.6,57.7z"/>
			</g>
			<g>
				<path d="M135.6,233.5c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4c46.5,0,84.3-34,84.3-75.8c0-41.8-37.8-75.8-84.3-75.8s-84.3,34-84.3,75.8
					c0,2.2-1.8,4-4,4c-2.2,0-4-1.8-4-4c0-46.3,41.4-83.9,92.3-83.9s92.3,37.6,92.3,83.9C227.9,195.9,186.5,233.5,135.6,233.5z"/>
			</g>
			<g ref="pupil" id="pupil">
				<g>
					<path class="st0" d="M133.5,109.5c22.2,0,40.1,18,40.1,40.1s-18,40.1-40.1,40.1s-40.1-18-40.1-40.1"/>
					<path d="M133.5,192.9c-23.9,0-43.3-19.4-43.3-43.3c0-1.7,1.4-3.2,3.2-3.2c1.7,0,3.2,1.4,3.2,3.2c0,20.4,16.6,37,37,37
						s37-16.6,37-37s-16.6-37-37-37c-1.7,0-3.2-1.4-3.2-3.2s1.4-3.2,3.2-3.2c23.9,0,43.3,19.4,43.3,43.3
						C176.8,173.5,157.3,192.9,133.5,192.9z"/>
				</g>
				<g>
					<circle cx="133.5" cy="149.7" r="27.9"/>
				</g>
				<g>
					<circle class="st0" cx="118.8" cy="132.2" r="17.5"/>
				</g>
			</g>
			<g>
				<path d="M80.8,52.1c-1.3,0-2.5-0.6-3.3-1.7c-1.3-1.8-0.8-4.3,1-5.6c15.2-10.5,34.7-16.4,54.8-16.4c22.1,0,39.3,4.3,52.8,13
					c1.9,1.2,2.4,3.7,1.2,5.6c-1.2,1.9-3.7,2.4-5.6,1.2c-11.9-7.8-28.2-11.7-48.4-11.7c-18.5,0-36.3,5.3-50.2,14.9
					C82.4,51.9,81.6,52.1,80.8,52.1z"/>
			</g>
			<g>
				<path d="M189.9,247.9c1.3,0,2.5,0.6,3.3,1.7c1.3,1.8,0.8,4.3-1,5.6c-15.2,10.5-34.7,16.4-54.8,16.4c-22.1,0-39.3-4.3-52.8-13
					c-1.9-1.2-2.4-3.7-1.2-5.6c1.2-1.9,3.7-2.4,5.6-1.2c11.9,7.8,28.2,11.7,48.4,11.7c18.5,0,36.3-5.3,50.2-14.9
					C188.3,248.1,189.1,247.9,189.9,247.9z"/>
			</g>
			<radialGradient id="SVGID_1_" cx="135.6084" cy="149.6609" r="80.5329" gradientUnits="userSpaceOnUse">
				<stop  offset="0.2496" style="stop-color:#FFFFFF;stop-opacity:0"/>
				<stop  offset="0.5292" style="stop-color:#FDFDFD;stop-opacity:0.3726"/>
				<stop  offset="0.63" style="stop-color:#F6F6F6;stop-opacity:0.5069"/>
				<stop  offset="0.7018" style="stop-color:#EBEBEB;stop-opacity:0.6026"/>
				<stop  offset="0.7599" style="stop-color:#DADADA;stop-opacity:0.68"/>
				<stop  offset="0.8096" style="stop-color:#C4C4C4;stop-opacity:0.7463"/>
				<stop  offset="0.8536" style="stop-color:#A8A8A8;stop-opacity:0.805"/>
				<stop  offset="0.8935" style="stop-color:#888888;stop-opacity:0.8581"/>
				<stop  offset="0.9301" style="stop-color:#626262;stop-opacity:0.9069"/>
				<stop  offset="0.9642" style="stop-color:#373737;stop-opacity:0.9523"/>
				<stop  offset="0.9945" style="stop-color:#090909;stop-opacity:0.9926"/>
				<stop  offset="1" style="stop-color:#000000"/>
			</radialGradient>
			<path class="st2" d="M135.6,73.8c46.9,0,85,34,85,75.8c0,41.7-37.9,75.6-84.6,75.8c-85.7-10.8-85.4-73-85.4-75.6l0-0.1v-0.1
				C50.6,107.9,88.7,73.8,135.6,73.8"/>
		</g>
		</svg>

		<svg version="1.1" class="eye-2" v-show="eyeStep === 2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
			 viewBox="0 0 270 300" style="enable-background:new 0 0 270 300;" xml:space="preserve">
		<g>
			<path d="M135.6,204.2c-39.2,0-77.8-18.9-89.8-41.3c-0.6-1.2-2.9-2.4-5-3.7c-3.6-2-7.7-4.4-7.7-7.8c0-3.2,4.1-6.1,8-9
				c2.2-1.6,4.5-3.3,5.2-4.4c13.7-24,47.1-40.3,89.3-40.3c40.4,0,78.6,18.2,90.7,40.5c0.7,1.2,2.5,2.7,4.2,4.2c3,2.5,6.4,5.3,6.4,8.5
				c0,2.6-2.8,4.9-5.2,6.9c-1.4,1.2-2.9,2.4-3.3,3.3C218.5,184.5,178.6,204.2,135.6,204.2z"/>
			<path class="st0" d="M135.6,104.7c-38.6,0-69.1,13.1-81.7,35c-1.1,2-3.8,3.9-6.6,5.9c-2.6,1.9-6.1,4.4-6.1,5.8
				c0,1.3,2.5,2.7,5.1,4.2c2.8,1.6,5.9,3.4,7.2,5.7c10.9,20.5,46.2,35.9,82.1,35.9c39.5,0,76-16.1,85-37.3c0.8-1.8,2.7-3.4,4.7-5
				c1.6-1.3,3.6-3,3.6-3.9c0-1.6-2.5-3.6-4.8-5.6c-2.1-1.8-4.3-3.6-5.4-5.5C207.6,119.5,172.6,104.7,135.6,104.7z"/>
			<g class="st1">
				<path d="M135.6,102.2c39,0,75.4,15.7,86.9,36.8c2.1,3.8,10.4,7.8,10.4,11.9c0,3.2-7.1,6.5-8.4,9.5c-9.5,22.4-48.3,39.2-88.9,39.2
					c-38.6,0-74.8-16.8-85.9-37.6c-2.1-4-12.5-6.4-12.5-10.7c0-4,10.8-8.9,12.9-12.5C63.7,115,96.3,102.2,135.6,102.2 M135.6,90.8
					c-45.7,0-81.9,19.5-96.9,45.4c-0.5,0.6-2.5,2-3.8,2.9c-4.4,3.2-9.9,7.2-9.9,12.2c0,5.6,6.2,9.1,10.3,11.4c1,0.6,2.4,1.4,3,1.8
					c6.3,11.6,19.4,24.3,36.9,32.1c18,8,39.4,14.4,60.4,14.4c46.4,0,89.6-23.1,100.5-48.5c0.4-0.4,1.4-1.2,2.1-1.8
					c2.9-2.4,6.8-5.6,6.8-9.8c0-4.8-4.4-8.5-8-11.4c-1.1-0.9-2.7-2.3-3.1-2.8C220.8,112.4,179.4,90.8,135.6,90.8L135.6,90.8z"/>
			</g>
			<g>
				<path d="M135.6,204.2c-2.2,0-4-3.1-4-4.5s1.8-2.5,4-2.5c46.5,0,84.3-20.8,84.3-46.3c0-25.5-37.8-46.3-84.3-46.3
					S51.4,125.4,51.4,151c0,1.4-1.8,2.5-4,2.5c-2.2,0-4-1.1-4-2.5c0-28.2,41.4-53.2,92.3-53.2s92.3,25,92.3,53.2
					C227.9,179.2,186.5,204.2,135.6,204.2z"/>
			</g>
			<g>
				<g>
					<path class="st0" d="M133.5,107.9c22.2,0,40.1,18,40.1,40.1s-18,40.1-40.1,40.1s-40.1-18-40.1-40.1"/>
					<path d="M133.5,191.3c-23.9,0-43.3-19.4-43.3-43.3c0-1.7,1.4-3.2,3.2-3.2c1.7,0,3.2,1.4,3.2,3.2c0,20.4,16.6,37,37,37
						s37-16.6,37-37s-16.6-37-37-37c-1.7,0-3.2-1.4-3.2-3.2c0-1.7,1.4-3.2,3.2-3.2c23.9,0,43.3,19.4,43.3,43.3
						C176.8,171.8,157.3,191.3,133.5,191.3z"/>
				</g>
				<g>
					<circle cx="133.5" cy="148" r="27.9"/>
				</g>
				<g>
					<circle class="st0" cx="118.8" cy="130.5" r="17.5"/>
				</g>
			</g>
			<g>
				<path d="M80.8,84c-1.3,0-2.5-0.6-3.3-1.7c-1.3-1.8-0.8-4.3,1-5.6c15.2-10.5,34.7-16.4,54.8-16.4c22.1,0,39.3,4.3,52.8,13
					c1.9,1.2,2.4,3.7,1.2,5.6c-1.2,1.9-3.7,2.4-5.6,1.2c-11.9-7.8-28.2-11.7-48.4-11.7c-18.5,0-36.3,5.3-50.2,14.9
					C82.4,83.8,81.6,84,80.8,84z"/>
			</g>
			<g>
				<path d="M189.9,216c1.3,0,2.5,0.6,3.3,1.7c1.3,1.8,0.8,4.3-1,5.6c-15.2,10.5-34.7,16.4-54.8,16.4c-22.1,0-39.3-4.3-52.8-13
					c-1.9-1.2-2.4-3.7-1.2-5.6c1.2-1.9,3.7-2.4,5.6-1.2c11.9,7.8,28.2,11.7,48.4,11.7c18.5,0,36.3-5.3,50.2-14.9
					C188.3,216.2,189.1,216,189.9,216z"/>
			</g>

				<radialGradient id="SVGID_1_" cx="135.6084" cy="662.4116" r="80.5329" gradientTransform="matrix(1 0 0 0.6104 0 -253.3999)" gradientUnits="userSpaceOnUse">
				<stop  offset="0.2496" style="stop-color:#FFFFFF;stop-opacity:0"/>
				<stop  offset="0.5292" style="stop-color:#FDFDFD;stop-opacity:0.3726"/>
				<stop  offset="0.63" style="stop-color:#F6F6F6;stop-opacity:0.5069"/>
				<stop  offset="0.7018" style="stop-color:#EBEBEB;stop-opacity:0.6026"/>
				<stop  offset="0.7599" style="stop-color:#DADADA;stop-opacity:0.68"/>
				<stop  offset="0.8096" style="stop-color:#C4C4C4;stop-opacity:0.7463"/>
				<stop  offset="0.8536" style="stop-color:#A8A8A8;stop-opacity:0.805"/>
				<stop  offset="0.8935" style="stop-color:#888888;stop-opacity:0.8581"/>
				<stop  offset="0.9301" style="stop-color:#626262;stop-opacity:0.9069"/>
				<stop  offset="0.9642" style="stop-color:#373737;stop-opacity:0.9523"/>
				<stop  offset="0.9945" style="stop-color:#090909;stop-opacity:0.9926"/>
				<stop  offset="1" style="stop-color:#000000"/>
			</radialGradient>
			<path class="st2" d="M135.6,104.7c46.9,0,85,20.8,85,46.3c0,25.4-37.9,46.2-84.6,46.3c-85.7-6.6-85.4-44.6-85.4-46.2l0-0.1V151
				C50.6,125.4,88.7,104.7,135.6,104.7"/>
		</g>
		</svg>

    <svg class="eye-3" v-show="eyeStep === 3" version="1.0" xmlns="http://www.w3.org/2000/svg"
         width="208.000000pt" height="126.000000pt" viewBox="0 0 208.000000 126.000000"
         preserveAspectRatio="xMidYMid meet">

      <g transform="translate(0.000000,126.000000) scale(0.100000,-0.100000)"
         fill="#000000" stroke="none">
        <path d="M865 1253 c-125 -20 -275 -75 -373 -137 -35 -22 -43 -32 -40 -53 5
          -41 32 -52 71 -29 169 100 305 138 497 138 173 0 297 -24 417 -82 94 -46 115
          -45 121 2 4 30 -27 55 -114 94 -108 48 -206 65 -384 69 -91 2 -178 1 -195 -2z"/>
        <path d="M62 668 c-17 -17 -15 -44 4 -62 14 -14 116 -16 974 -16 858 0 960 2
          974 16 19 18 21 45 4 62 -17 17 -1939 17 -1956 0z"/>
        <path d="M1518 210 c-151 -95 -363 -140 -569 -120 -137 13 -217 34 -318 82
          -92 44 -113 43 -119 -4 -4 -30 27 -55 114 -94 120 -53 213 -68 414 -68 163 -1
          195 2 270 23 90 24 198 70 268 114 43 28 55 60 30 85 -18 18 -39 14 -90 -18z"/>
      </g>
    </svg>
  </div>
</template>

<script lang="ts">
import { Vue, Component } from 'vue-property-decorator'
import throttle from 'lodash/throttle'

@Component
export default class Eye extends Vue {
  pupil: Element | null = null
  eye: HTMLElement | null = null
  eyeStep: number = 1

  mounted () {
    this.pupil = this.$refs.pupil as Element
    this.eye = this.$refs.eye as HTMLElement

    setInterval(() => {
      this.wink()
    }, 7000)

    this.eye.addEventListener('mousemove', throttle((e: MouseEvent) => {
      let x: number = (e.x - window.innerWidth / 2) / 10
      let y: number = (e.y - (window.innerHeight + 60) / 2) / 10

			let xMax = 25
			let yMax = 30
      x = x > xMax ? xMax : x
      x = x < -xMax ? -xMax : x
      y = y > yMax ? yMax : y
      y = y < -yMax ? -yMax : y
      if (this.pupil !== null) {
        this.pupil.setAttribute('style', `transform: translate(${x}px, ${y}px)`)
      }
    }, 100))
  }

  private wink (): void {
    this.eyeStep = 2
    setTimeout(() => {
      this.eyeStep = 3
      setTimeout(() => {
        this.eyeStep = 1
      }, 400)
    }, 20)
  }
}
</script>

<style scoped>
  svg {
    position: relative;
		height: 400px;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }

  #pupil {
    transform: translate(0, 0);
    transition: transform .1s linear;
  }

	.st0{fill:#FFFFFF;}
	.st1{opacity:0.2;}
	.st2{opacity:0.3;fill:url(#SVGID_1_);}
</style>